apply from: "$rootDir/gradle/dependencies.gradle"
apply from: "$rootDir/gradle/artifacts.gradle"
apply from: "$rootDir/gradle/avro.gradle"
apply plugin: "idea"
apply plugin: "eclipse"

sourceCompatibility = 1.8
targetCompatibility = 1.8

group = 'com.feltnerm'
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile([
        libs.avro,
        libs.parquetAvro,
        libs.commonsIO,
        libs.commonsLang,
        libs.guava
    ])

    providedCompile([
        libs.spark,
        libs.sparkMlLib,
        libs.sparkGraphX,
        libs.sparkStreaming
    ])
}

// Gradle Wrapper Settings
task wrapper(type: Wrapper) {
    gradleVersion = "2.4"
}

task runSpark(dependsOn: 'hadoopJar', type: JavaExec) {
    classpath = files(hadoopJar.archivePath, configurations.providedCompile)
    maxHeapSize = "2048m"

    // Set main class
    if (project.hasProperty('sparkMain')) {
        main = sparkMain
    }
    // Set args
    if (project.hasProperty('sparkArgs')) {
        args(sparkArgs.split(' '))
    }
}
